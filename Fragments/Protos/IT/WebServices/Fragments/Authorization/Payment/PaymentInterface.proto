syntax = "proto3";

package IT.WebServices.Fragments.Authorization.Payment;

import "google/api/annotations.proto";
import "Protos/IT/WebServices/Fragments/Authorization/Payment/DataRecords.proto";
import "Protos/IT/WebServices/Fragments/Authorization/Payment/PaymentError.proto";
import "Protos/IT/WebServices/Fragments/Authorization/Payment/Crypto/CryptoRecords.proto";
import "Protos/IT/WebServices/Fragments/Authorization/Payment/Manual/ManualSubscriptionRecord.proto";
import "Protos/IT/WebServices/Fragments/Authorization/Payment/Paypal/PaypalRecords.proto";
import "Protos/IT/WebServices/Fragments/Authorization/Payment/Stripe/StripeRecords.proto";

service PaymentInterface {
  rpc CancelOwnSubscription (CancelOwnSubscriptionRequest) returns (CancelSubscriptionResponse)
  {
    option (google.api.http) = {
      post: "/api/payment/subscription/cancel"
      body: "*"
    };
  }

  rpc GetNewDetails (GetNewDetailsRequest) returns (GetNewDetailsResponse)
  {
    option (google.api.http) = {
      get: "/api/payment/new/{Level}"
    };
  }

  rpc GetNewOneTimeDetails (GetNewOneTimeDetailsRequest) returns (GetNewOneTimeDetailsResponse)
  {
    option (google.api.http) = {
      get: "/api/payment/single/new"
    };
  }

  rpc GetOwnSubscriptionRecord (GetOwnSubscriptionRecordRequest) returns (GetSubscriptionRecordResponse)
  {
    option (google.api.http) = {
      get: "/api/payment/subscription/{InternalSubscriptionID}"
    };
  }

  rpc GetOwnSubscriptionRecords (GetOwnSubscriptionRecordsRequest) returns (GetSubscriptionRecordsResponse)
  {
    option (google.api.http) = {
      get: "/api/payment/subscription"
    };
  }

  rpc GetOwnOneTimeRecord (GetOwnOneTimeRecordRequest) returns (GetOneTimeRecordResponse)
  {
    option (google.api.http) = {
      get: "/api/payment/single/{InternalPaymentID}"
    };
  }

  rpc GetOwnOneTimeRecords (GetOwnOneTimeRecordsRequest) returns (GetOneTimeRecordsResponse)
  {
    option (google.api.http) = {
      get: "/api/payment/single"
    };
  }

  rpc ReconcileOwnSubscription (ReconcileOwnSubscriptionRequest) returns (ReconcileSubscriptionResponse)
  {
    option (google.api.http) = {
      get: "/api/payment/subscription/reconcile"
    };
  }
}

message CancelOwnSubscriptionRequest {
  string InternalSubscriptionID = 1;
  string Reason = 11;
}

message CancelSubscriptionResponse {
  GenericSubscriptionRecord Record = 1;
  PaymentError Error = 2;
}

message GetNewDetailsRequest {
  uint32 Level = 1;
  string DomainName = 2;
}

message GetNewDetailsResponse {
  Crypto.CryptoNewDetails Crypto = 1;
  Paypal.PaypalNewDetails Paypal = 5;
  Stripe.StripeNewDetails Stripe = 6;
  PaymentError Error = 7;
}

message GetNewOneTimeDetailsRequest {
  string InternalID = 1;
  string DomainName = 2;
  uint32 DifferentPresetPriceCents = 3;
}

message GetNewOneTimeDetailsResponse {
  //Crypto.CryptoNewOneTimeDetails Crypto = 1;
  //Paypal.PaypalNewOneTimeDetails Paypal = 5;
  Stripe.StripeNewOneTimeDetails Stripe = 6;
  PaymentError Error = 7;
}

message GetOwnSubscriptionRecordRequest {
  string InternalSubscriptionID = 1;
}

message GetSubscriptionRecordResponse {
  GenericSubscriptionFullRecord Generic = 1;
  Manual.ManualSubscriptionRecord Manual = 2;
  PaymentError Error = 3;
}

message GetOwnSubscriptionRecordsRequest {
}

message GetSubscriptionRecordsResponse {
  repeated GenericSubscriptionFullRecord Generic = 1;
  repeated Manual.ManualSubscriptionRecord Manual = 2;
  PaymentError Error = 3;
}

message GetOwnOneTimeRecordRequest {
  string InternalPaymentID = 1;
}

message GetOneTimeRecordResponse {
  GenericOneTimePaymentRecord Generic = 1;
  PaymentError Error = 2;
}

message GetOwnOneTimeRecordsRequest {
}

message GetOneTimeRecordsResponse {
  repeated GenericOneTimePaymentRecord Generic = 1;
  PaymentError Error = 2;
}

message ReconcileOwnSubscriptionRequest {
  string InternalSubscriptionID = 1;
}
  
message ReconcileSubscriptionResponse {
  GenericSubscriptionFullRecord Record = 1;
  PaymentError Error = 2;
}
